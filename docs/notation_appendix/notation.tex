
Let $F:\mathbb{R}^N \rightarrow \mathbb{R}^M$ be defined by
\begin{equation}
F(\vec{x}) = (f_1(\vec{x}),f_2(\vec{x}),\cdots,f_M(\vec{x}))) \text{    for some  } f_i:\mathbb{R}^N \rightarrow \mathbb{R}
\end{equation}

\begin{defn}[Derivative with respect to a vector]
 We define the derivative of $F(x(\vec{w}))$ with respect to a vector $\vec{w}$ of $p$ elements as the $M \times p$ matrix
\begin{equation}
\frac{\partial F}{\partial \vec{w}} \triangleq
\begin{bmatrix}
   \frac{\partial f_1}{\partial \vec{w}_1}    & \frac{\partial f_1}{\partial \vec{w}_2}                & \cdots      & \cdots       & \frac{\partial f_1}{\partial \vec{w}_p}  \\
   \frac{\partial f_2}{\partial \vec{w}_1}    & \frac{\partial f_2}{\partial \vec{w}_2}                & \cdots      & \cdots       & \frac{\partial f_2}{\partial \vec{w}_p}  \\
   \vdots                & \vdots           & \vdots      & \vdots       &\vdots\\
   \frac{\partial f_M}{\partial \vec{w}_1}    & \frac{\partial f_M}{\partial \vec{w}_2}                & \cdots      & \cdots       & \frac{\partial f_M}{\partial \vec{w}_p}
\end{bmatrix}
\end{equation}
\end{defn}


\begin{defn}[Derivative with respect to a matrix]
We define the derivative of $F(\vec{x}(\mat{W}))$ with respect to a matrix $\mat{W}$, being $W_j$ the $j^{th}$ column of a 
$p\times m$ matrix $W$ as the $M\times (p \cdot m )$ matrix:
\begin{equation}
\frac{\partial F}{\partial \mat{W}} \triangleq
\left[
\begin{array}{c|c|c|c}
\frac{\partial F}{W_1} & \frac{\partial F}{W_2} & \cdots & \frac{\partial F}{W_m} \\
\end{array}
\right]
\end{equation}
\end{defn}
Please note that according to this definitions $\nabla f(x)$ with $f:\mathbb{R}^N \rightarrow \mathbb{R}$ corresponds to $\frac{\partial f}{\partial\vec{x}}^T$.

\begin{defn}[Immediate derivative]
Consider a recurrence 
$$a^k(\vec{x}) =F(\vec{x}(\vec{w})) +  R(a^{k-1}(\vec{x}(\vec{w})), \dots, a^0(\vec{x}(\vec{w})))$$
We define the immediate derivative of $a^k(\vec{x}(\vec{w})))$ with respect to the vector $\vec{w}$
the matrix 
\begin{equation}
	\frac{\partial^+ a^k}{\partial \vec{w}} \defeq \frac{\partial F}{\partial \vec{w}}.
\end{equation}
\end{defn}


